!function(){"use strict";var t="",e="datasetEvent",o={small:"SMALL",medium:"MEDIUM",large:"LARGE"},a={},i={},s="awesomeChart",n={},l={},r={small:320,medium:1024,large:1280},c={small:18,medium:40,large:60},u="../data/perf.min.json",d={animation:!0,animationSteps:24,animationEasing:"easeOutSine",showScale:!0,scaleLineColor:"rgba(0,0,0,.2)",scaleLineWidth:1,"bezierCurve ":!1,responsive:!0,chart1:{label:"standard",fillColor:"rgba(4,43,82,0)",strokeColor:"rgba(4,43,82,1)",pointColor:"rgba(4,43,82,1)",pointStrokeColor:"rgba(4,43,82,0)",pointHighlightFill:"rgba(4,43,82,0)",pointHighlightStroke:"rgba(4,43,82,1)"},chart2:{label:"ASX benchmark",fillColor:"rgba(231,148,46,0)",strokeColor:"rgba(231,148,46,1)",pointColor:"rgba(231,148,46,1)",pointStrokeColor:"rgba(231,148,46,0)",pointHighlightFill:"rgba(231,148,46,0)",pointHighlightStroke:"rgba(231,148,46,1)"},chart3:{label:"XYZ benchmark",fillColor:"rgba(148,8,44,0)",strokeColor:"rgba(148,8,44,1)",pointColor:"rgba(148,8,44,1)",pointStrokeColor:"rgba(255,255,255,0)",pointHighlightFill:"rgba(255,255,255,0)",pointHighlightStroke:"rgba(148,8,44,1)"}},h={},g={labels:[],subset:{},datasets:[{}]},m={name:"third chartApp ",init:function(){return console.log(this.name+"init"),this.bindUI(),this.addResizeListener(),this.drawChart(),this},bindUI:function(){console.log(this.name+"bindUI"),n=document.getElementById(s)},debounce:function(t,e,o){console.log(this.name+"debounce");var a;return function(){var i=this,s=arguments,n={},l=function(){a=null,o||t.apply(i,s)};n=o&&!a,clearTimeout(a),a=setTimeout(l,e),n&&t.apply(i,s)}},handleWindowSize:function(){console.log(this.name+"handleWindowSize: ",window.innerWidth),window.innerWidth<r.medium?(console.log("dispatch event to chartElem, screen size: small"),a=new CustomEvent(o.small),n.dispatchEvent(a)):window.innerWidth>=r.medium&&window.innerWidth<r.large?(console.log("dispatch event to chartElem, screen size: medium"),a=new CustomEvent(o.medium),n.dispatchEvent(a)):(console.log("dispatch event to chartElem, screen size: large"),a=new CustomEvent(o.large),n.dispatchEvent(a))},addResizeListener:function(){console.log(this.name+"addResizeListener");var t=this,e=250,o=this.debounce(function(){t.handleWindowSize()},e);window.addEventListener("resize",o)},subsetSmall:function(){console.log(this.name+"subsetSmall"),console.log("create SMALL subset of data points"),g.labels=g.subset.small.map(function(t){return t.date}),g.subset.standard=g.subset.small.map(function(t){return t.standard.toString().slice(0,6)}),g.subset.case1=g.subset.small.map(function(t){return t.case1.toString().slice(0,6)}),g.subset.case2=g.subset.small.map(function(t){return t.case2.toString().slice(0,6)})},subsetMedium:function(){console.log(this.name+"subsetMedium"),console.log("create MEDIUM subset of data points"),g.labels=g.subset.medium.map(function(t){return t.date}),g.subset.standard=g.subset.medium.map(function(t){return t.standard.toString().slice(0,6)}),g.subset.case1=g.subset.medium.map(function(t){return t.case1.toString().slice(0,6)}),g.subset.case2=g.subset.medium.map(function(t){return t.case2.toString().slice(0,6)})},subsetLarge:function(){console.log(this.name+"subsetLarge"),console.log("create LARGE subset of data points"),g.labels=g.subset.large.map(function(t){return t.date}),g.subset.standard=g.subset.large.map(function(t){return t.standard.toString().slice(0,6)}),g.subset.case1=g.subset.large.map(function(t){return t.case1.toString().slice(0,6)}),g.subset.case2=g.subset.large.map(function(t){return t.case2.toString().slice(0,6)})},formatNumbers:function(t){return console.log(this.name+"formatNumbers"),t.toString().slice(0,6)},pickPoints:function(){console.log(this.name+"pickPoints")},processData:function(e){console.log(this.name+"processData");var a=this,i=this.pickPoints(e.myJSON,c.large);console.log("temp",i),g.subset.large=e.myJSON.slice(-c.large),g.subset.medium=g.subset.large.slice(-c.medium),g.subset.small=g.subset.medium.slice(-c.small),""===t&&(window.innerWidth<r.medium?(this.subsetSmall(),t=o.small):window.innerWidth>=r.medium&&window.innerWidth<r.large?(this.subsetMedium(),t=o.medium):(this.subsetLarge(),t=o.large),a.populateChart(g)),n.addEventListener(o.small,function(){console.log("small event listened"),console.log("currentDisplay: ",t),t!==o.small&&(console.log("display has passed breakpoint, update chart"),a.subsetSmall(),t=o.small,a.populateChart(g))}),n.addEventListener(o.medium,function(){console.log("medium event listened"),console.log("currentDisplay: ",t),t!==o.medium&&(console.log("display has passed breakpoint, update chart"),a.subsetMedium(),t=o.medium,a.populateChart(g))}),n.addEventListener(o.large,function(){console.log("large event listened"),console.log("currentDisplay: ",t),t!==o.large&&(console.log("display has passed breakpoint, update chart"),a.subsetLarge(),t=o.large,a.populateChart(g))})},toolTips:function(){Chart.defaults.global.pointHitDetectionRadius=1,Chart.defaults.global.customTooltips=function(t){var e=0,o="",a=$("#chartjs-tooltip"),i=["case2: ","case1: ","standard: "];if(!t)return void a.css({opacity:0});for(a.removeClass("above below"),a.addClass(t.yAlign),e=t.labels.length-1;e>=0;e--)o+=['<div class="chartjs-tooltip-section">','	<span class="chartjs-tooltip-key" style="background-color:'+t.legendColors[e].fill+'"></span>','	<span class="chartjs-tooltip-value">'+i[e]+t.labels[e]+"</span>","</div>"].join("");a.html(o),a.css({opacity:1,left:t.chart.canvas.offsetLeft+t.x+"px",top:t.chart.canvas.offsetTop+t.y+"px",fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle})}},populateChart:function(t){console.log(this.name+"populateChart"),h.chart&&h.destroy(),this.toolTips(),t.datasets=[{label:d.chart1.label,fillColor:d.chart1.fillColor,strokeColor:d.chart1.strokeColor,pointColor:d.chart1.pointColor,pointStrokeColor:d.chart1.pointStrokeColor,pointHighlightFill:d.chart1.pointHighlightFill,pointHighlightStroke:d.chart1.pointHighlightStroke,data:t.subset.standard},{label:d.chart2.label,fillColor:d.chart2.fillColor,strokeColor:d.chart2.strokeColor,pointColor:d.chart2.pointColor,pointStrokeColor:d.chart2.pointStrokeColor,pointHighlightFill:d.chart2.pointHighlightFill,pointHighlightStroke:d.chart2.pointHighlightStroke,data:t.subset.case1},{label:d.chart3.label,fillColor:d.chart3.fillColor,strokeColor:d.chart3.strokeColor,pointColor:d.chart3.pointColor,pointStrokeColor:d.chart3.pointStrokeColor,pointHighlightFill:d.chart3.pointHighlightFill,pointHighlightStroke:d.chart3.pointHighlightStroke,data:t.subset.case2}],i=new CustomEvent(e,{detail:t}),n.dispatchEvent(i)},drawChart:function(){console.log(this.name+"drawChart");var t=this,o={};l=n.getContext("2d"),this.fetchData(),n.addEventListener(e,function(a){console.log("data load event:",e),o=a.detail,h=new Chart(l).Line(o,{animation:d.animation,animationSteps:d.animationSteps,animationEasing:d.animationEasing,showScale:d.showScale,scaleLineColor:d.scaleLineColor,scaleLineWidth:d.scaleLineWidth,bezierCurve:d.bezierCurve,responsive:d.responsive}),console.log(t.name+"drawChart finished")},!1)},fetchData:function(){console.log(this.name+"fetchData");var t=this;u?$.ajax({url:u}).fail(function(){console.log("data load error")}).done(function(e){console.log("AJAX data load successful"),t.processData(e)}):console.log("error, no dataURL defined")}};window.Chart&&m.init()}();
